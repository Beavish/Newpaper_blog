require 'observer'
require 'open_weather'
require 'net/http'


Net::HTTP.get(URI.parse('https://ruby-doc.org/stdlib-2.5.3/libdoc/observer/rdoc/Observable.html'))

class WeatherStation
    include Observable

    attr_reader :name, :title
    attr_reader :salary
  
    def initialize
      @weather = get_weather
    end
  
    def check_weather
          current_weather =get_weather
          if@weather != current_weather
          changed
          @weather = current_weather
          notify_observers(current_weather)
          end
    sleep 3
          check_weather
      end
  
      private
  
      def get_weather
          result = Net::HTTP.get(URI.parse('https://samples.openweathermap.org/data/2.5/forecast?id=524901&appid=b1b15e88fa797225412429c1c50c122a1'))
          tutorial = Net::HTTP.get(URI.parse('https://ruby-doc.org/stdlib-2.5.3/libdoc/observer/rdoc/Observable.html'))
  
          puts result
          
      end
  
      class WeatherAlert
          def update(weather)
              puts weather
          end
      end
  
      station = WeatherStation.new
      alert = WeatherAlert.new
  
      station.add_observer(alert)


end